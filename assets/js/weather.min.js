function convertTemperatureFromKelvin(e){var a=e-273.15;return Math.round(a)}function weekday(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*e).getDay()]}function WeatherController(e,a){e.options={height:100,responsive:!0,maintainAspectRatio:!1},e.conditions={2:"Baita tempestade! Fique em casa com a família.",3:"Chuvinha boa pra refletir na vida.",5:"Uma boa hora pra ficar em casa assistindo Netflix :D",6:"Vamos fazer uns bonecos de neve? ;o>",7:"Provavelmente hoje é o fim do mundo :O",8:"Uma bela hora pra ir dar uma volta :)"};var t=function(t){a.get(api.weatherUrl+t).then(function(a){for(e.showWeather=!0,e.data=a.data,e.chosenPlace=e.data.city.name,localStorage.setItem("city",e.chosenPlace),e.weatherNow={},e.weatherNow.temperature=convertTemperatureFromKelvin(e.data.list[0].temp.day),e.weatherNow.description=e.data.list[0].weather[0].description,e.weatherNow.tip=e.conditions[e.data.list[0].weather[0].id.toString().substring(0,1)],e.labels=[],e.variation=[],e.variation[0]=[],e.variation[1]=[],i=0;i<5;i++)e.data.list[i].temp.max=convertTemperatureFromKelvin(e.data.list[i].temp.max),e.data.list[i].temp.min=convertTemperatureFromKelvin(e.data.list[i].temp.min),e.data.list[i].dt=weekday(e.data.list[i].dt),e.data.list[i].weather[0].icon=api.weatherImgSrc+e.data.list[i].weather[0].icon+".png",e.labels.push(e.data.list[i].dt),e.variation[0].push(e.data.list[i].temp.max),e.variation[1].push(e.data.list[i].temp.min);e.days=e.data.list,e.series=[" Max"," Min"]}).catch(function(e){swal("Cidade não encontrada","","error")})};localStorage.getItem("city")||localStorage.setItem("city","Blumenau"),t(localStorage.getItem("city")),e.chosenPlace=localStorage.getItem("city"),e.ctrlFn=function(e){t(e)}}function googleplace(){return{require:"ngModel",scope:{callbackFn:"&"},link:function(e,a,t,i){var r={types:["(cities)"],componentRestrictions:{country:"br"}};e.gPlace=new google.maps.places.Autocomplete(a[0],r),google.maps.event.addListener(e.gPlace,"place_changed",function(){a[0].blur();var t=e.gPlace.getPlace();e.callbackFn({city:t.name})})}}}var api={};api.weatherKey="becd669840e62b2bc9662a25ac13e51d",api.weatherUrl="http://api.openweathermap.org/data/2.5/forecast/daily?APPID="+api.weatherKey+"&q=",api.weatherImgSrc="http://openweathermap.org/img/w/",WeatherController.$inject=["$scope","$http"],angular.module("Weather",["chart.js"]).controller("WeatherController",WeatherController).directive("googleplace",googleplace);